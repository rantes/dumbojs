class DmbInput extends DumboDirective{static get observedAttributes(){return["valid","name","validate","dmb-name"]}constructor(){super();const template="<label></label>"+'<input type="text" placeholder="" />'+'<span class="error-container"></span>';this.setTemplate(template);this.isValid=false}attributeChangedCallback(attr,oldValue,newValue){const input=this.querySelector("input");switch(attr){case"valid":this.isValid=newValue!==null;break;case"name":if(input)input.setAttribute("name",newValue);break;case"dmb-name":if(input)input.setAttribute("name",newValue);break;case"validate":if(input)input.setAttribute("validate",newValue);break}}init(){let _errorInputClass="_error",validations={_required:function(value){let response={valid:true,error:null};if(typeof value==="undefined"||value===null||value===""){response.valid=false;response.error="Este campo es obligatorio"}return response},_email:function(value){let response={valid:true,error:null},re=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/;if(value&&!re.test(value)){response.valid=false;response.error="No es una direcci&oacute;n de email v&aacute;lido"}return response},_numeric:function(value){let response={valid:true,error:null},re=/^[0-9]\d*/;if(value&&!re.test(value)){response.valid=false;response.error="Este campo debe ser solo num&eacute;rico"}return response},_min:function(value,param){let response={valid:true,error:null};if(value&&value.length<param){response.valid=false;response.error="Este campo debe ser de "+param+" caracteres m&iacute;nimo"}return response},_max:function(value,param){let response={valid:true,error:null};if(value&&value.length>param){response.valid=false;response.error="Este campo debe ser de "+param+" caracteres m&aacute;ximo"}return response}};let input=this.getElementsByTagName("input").item(0),validators=[];this.querySelector("label").innerText=this.getAttribute("label");input.setAttribute("aria-label",this.getAttribute("label")||"");input.setAttribute("masked",this.getAttribute("masked")||"");input.setAttribute("autocomplete",this.getAttribute("autocomplete")||"");input.setAttribute("type",this.getAttribute("type")||"text");input.setAttribute("class",this.getAttribute("dmb-class")||"");input.setAttribute("name",this.getAttribute("dmb-name")||"");input.setAttribute("validate",this.getAttribute("validate")||"");input.setAttribute("placeholder",this.getAttribute("placeholder")||this.getAttribute("label")||"");input.setAttribute("valid","true");input.id=this.getAttribute("dmb-id")||this.generateId();input.value=this.getAttribute("value");const maskInputUppercase=e=>{e.target.value=e.target.value.toUpperCase()};const maskInputAlpha=e=>{var char=e.which||e.keyCode;if((char<65||char>90)&&(char<97||char>122)){return false}};const maskInputNumeric=e=>{var char=e.which||e.keyCode;if(char<48||char>57){return false}};const _runValidators=(element,validators)=>{var unknownValidator=()=>{return{valid:false,error:'Unknown validator type: "'+(validator||{}).key+'"'}},content=element.value.trim(),valid=true,validator=null,func=null,result=null,message=null;element.value=content;for(var i=0,len=validators.length;i<len;i++){validator=validators[i];func=validations["_"+validator.key]||unknownValidator;result=func(content,validator.param);if(result.valid!==true){valid=false;message=result.error;break}}if(valid===true){element.parentNode.classList.remove(_errorInputClass);element.parentNode.querySelectorAll(".error-container").item(0).innerHTML=""}else{element.parentNode.classList.add(_errorInputClass);element.parentNode.querySelectorAll(".error-container").item(0).innerHTML=message}this.isValid=valid;valid?element.setAttribute("valid",""):element.removeAttribute("valid")};const buildValidators=(element,scope)=>{var validators=[],validatorList=(scope.getAttribute("validate")||"").split(",");for(var i=0,len=validatorList.length;i<len;i++){var keyParam=validatorList[i].split(":");if(keyParam[0]){validators.push({key:keyParam[0],param:keyParam.length===2?keyParam[1]:null});if(keyParam[0]==="required"){element.parentNode.classList.add("required");element.setAttribute("required","required")}}}return validators};if(this.getAttribute("validate")){validators=buildValidators(input,this);input.addEventListener("blur",e=>{_runValidators(e.target,validators)},true);document.body.addEventListener(window.dmbEventsService.validate.listener,()=>{_runValidators(input,validators)},true);document.body.addEventListener(window.dmbEventsService.resetValidation.listener,()=>{let elements=this.getElementsByClassName(_errorInputClass);for(let i=0;elements.length;i++){elements.item(0).classList.remove(_errorInputClass)}},true)}if(this.getAttribute("masked")){switch(this.getAttribute("masked")){case"alpha":input.onkeypress=maskInputAlpha;break;case"numeric":input.onkeypress=maskInputNumeric;break;case"uppercase":input.oninput=maskInputUppercase;break}}}}customElements.define("dmb-input",DmbInput);Window.prototype.dmbEventsService={panelClose:{event:new Event("dmb-panel.close"),listener:"dmb-panel.close"},panelOpen:{event:new Event("dmb-panel.open"),listener:"dmb-panel.open"},panelClosed:{event:new Event("dmb-panel.closed"),listener:"dmb-panel.closed"},panelOpened:{event:new Event("dmb-panel.opened"),listener:"dmb-panel.opened"},resetValidation:{event:new Event("dmb-validation.reset"),listener:"dmb-validation.reset"},validate:{event:new Event("dmb-validation.validate"),listener:"dmb-validation.validate"},pageLoaderClose:{event:new Event("dmb-page-loader.close"),listener:"dmb-page-loader.close"}};class DmbClosePanel extends DumboDirective{constructor(){super();const template='<i class="icon"></i>';this.setTemplate(template)}init(){const orientation=this.getAttribute("orientation")||"right";const icon=this.querySelector("i.icon");let panel=null;this.classList.add(orientation);icon.classList.add(`icon-chevron-${orientation}`);this.addEventListener("click",()=>{panel=this.closest("dmb-panel");panel.close()})}}customElements.define("dmb-close-panel",DmbClosePanel);class DmbMenuButton extends DumboDirective{constructor(){super();let template='<i class="icon icon-bars"></i>'+'<span class="legend"></span>';this.setTemplate(template)}init(){const legend=this.getAttribute("legend");this.querySelector(".legend").textContent=legend;this.addEventListener("click",()=>{let menu=this.getAttribute("menu");if(menu.length){document.querySelector(menu).showModal()}})}}customElements.define("dmb-menu-button",DmbMenuButton);class DmbWysiwyg extends DumboDirective{static get observedAttributes(){return["valid","name","validate","dmb-name"]}constructor(){super();const template='<section id="{{id}}" class="dmb-wysiwyg {{dmbClass}}" >'+'<div class="dmb-wysiwyg__toolbar">'+'<a href="#" class="dmb-wysiwyg__toolbar-button" data-command="h2">H2</a>'+'<a href="#" class="dmb-wysiwyg__toolbar-button" data-command="h3">H3</a>'+'<a href="#" class="dmb-wysiwyg__toolbar-button" data-command="h4">H4</a>'+'<a href="#" class="dmb-wysiwyg__toolbar-button" data-command="h5">H5</a>'+'<a href="#" class="dmb-wysiwyg__toolbar-button" data-command="h6">H6</a>'+'<a href="#" class="dmb-wysiwyg__toolbar-button" data-command="undo"><i class="icon icon-undo"></i></a>'+'<a href="#" class="dmb-wysiwyg__toolbar-button" data-command="redo"><i class="icon icon-redo"></i></a>'+'<a href="#" class="dmb-wysiwyg__toolbar-button">'+'<i class="icon icon-brush"></i>'+'<a href="#" class="fore-palette"></a>'+"</a>"+'<a href="#" class="dmb-wysiwyg__toolbar-button" data-command="createlink"><i class="icon icon-link"></i></a>'+'<a href="#" class="dmb-wysiwyg__toolbar-button" data-command="justifyLeft"><i class="icon icon-paragraph-left"></i></a>'+'<a href="#" class="dmb-wysiwyg__toolbar-button" data-command="superscript"><i class="icon icon-superscript2"></i></a>'+'<a href="#" class="dmb-wysiwyg__toolbar-button source-button" data-command="source">Source</a>'+'<a href="#" class="dmb-wysiwyg__toolbar-button normal-button" data-command="normal" style="display:none;">Normal</a>'+"</div>"+'<section class="dmb-wysiwyg__content-content" contenteditable transclude>'+"</section>"+"</section>";this.setTemplate(template);this.isValid=false;this.colorPalette=["000000","FF9966","6699FF","99FF66","CC0000","00CC00","0000CC","333333","0066FF","FFFFFF"];this.toolbarElements=[]}init(){const forePalette=this.querySelector(".fore-palette");let hideButtons=null;let showButtons=null;let executeCommand=null;for(let i=0;i<this.colorPalette.length;i++){let a=document.createElement("div");a.dataset.command="forecolor";a.dataset.value=`#${this.colorPalette[i]}`;a.style.backgroundColor=`#${this.colorPalette[i]}`;a.classList.add("palette-item");a.classList.add("dmb-wysiwyg__toolbar-button");forePalette.append(a.cloneNode(true));a=null}this.toolbarElements=this.querySelectorAll(".dmb-wysiwyg__toolbar-button");hideButtons=(toolbarElements=>{for(let j=0;j<toolbarElements.length;j++){toolbarElements[j].style.display="none"}});showButtons=(toolbarElements=>{for(let j=0;j<toolbarElements.length;j++){toolbarElements[j].style.display="flex"}});executeCommand=(e=>{const me=e.target;let command=me.dataset.command;let value=me.dataset.value;let url;let textArea;let editArea;e.preventDefault();switch(command){case"h2":case"h3":case"h4":case"p":document.execCommand("formatBlock",false,command);break;case"forecolor":case"backcolor":document.execCommand(command,false,value);break;case"createlink":case"insertimage":url=prompt("Enter the link here: ","");if(url&&url.length){document.execCommand(command,false,url)}break;case"source":hideButtons(this.toolbarElements);me.parentNode.querySelector(".normal-button").style.display="flex";textArea=document.createElement("textarea");editArea=me.parentNode.parentNode.querySelector(".dmb-wysiwyg__content-content");textArea.classList.add("dmb-wysiwyg__content-content");textArea.value=editArea.innerHTML;editArea.parentNode.replaceChild(textArea,editArea);break;case"normal":showButtons(this.toolbarElements);me.style.display="none";editArea=document.createElement("div");textArea=me.parentNode.parentNode.querySelector(".dmb-wysiwyg__content-content");editArea.classList.add("dmb-wysiwyg__content-content");editArea.setAttribute("contenteditable",true);editArea.innerHTML=textArea.value;textArea.parentElement.replaceChild(editArea,textArea);break;default:document.execCommand(command,false,null);break}});for(let i=0;i<this.toolbarElements.length;i++){this.toolbarElements[i].addEventListener("click",executeCommand)}}}customElements.define("dmb-wysiwyg",DmbWysiwyg);class DmbFooter extends DumboDirective{constructor(){super()}init(){this.classList.add("dmb-footer");this.closest(".dmb-view").classList.add("padded-footer")}}customElements.define("dmb-footer",DmbFooter);class DmbForm extends DumboDirective{constructor(){super()}submit(){const hasValids=items=>{for(let i=0;i<items.length;i++){if(!items[i].hasAttribute("valid")){items[i].reportValidity();items[i].focus();return false}}return true};document.body.dispatchEvent(window.dmbEventsService.resetValidation.event);document.body.dispatchEvent(window.dmbEventsService.validate.event);const inputs=this.querySelectorAll("input[validate]");const selects=this.querySelectorAll("select[validate]");const textAreas=this.querySelectorAll("textarea[validate]");const isAsync=this.hasAttribute("async");let vForm=null;if(hasValids(inputs)&&hasValids(selects)&&hasValids(textAreas)){this.dispatchEvent(new Event("onsubmit"));if(isAsync){if(typeof this.callback==="function"){this.callback()}}else{vForm=document.createElement("form");vForm.method=this.getAttribute("method");vForm.action=this.getAttribute("action");vForm.name=this.getAttribute("name");vForm.style="display: none; height: 0; width: 0;";[].forEach.call(this.querySelectorAll("input"),input=>{vForm.append(input)});[].forEach.call(this.querySelectorAll("select"),select=>{vForm.append(select)});[].forEach.call(this.querySelectorAll("textarea"),textarea=>{vForm.append(textarea)});document.body.append(vForm);vForm.submit()}return true}return false}getFormData(){const formObject=new FormData;[].forEach.call(this.querySelectorAll("input"),input=>{formObject.append(input.getAttribute("name"),input.value)});[].forEach.call(this.querySelectorAll("select"),select=>{formObject.append(select.getAttribute("name"),select.value)});[].forEach.call(this.querySelectorAll("textarea"),textarea=>{formObject.append(textarea.getAttribute("name"),textarea.value)});return formObject}}customElements.define("dmb-form",DmbForm);class DmbTextArea extends DumboDirective{static get observedAttributes(){return["valid","name","validate","dmb-name"]}constructor(){super();const template="<label></label>"+"<textarea transclude>"+"</textarea>"+'<span class="error-container"></span>';this.setTemplate(template);this.isValid=false}attributeChangedCallback(attr,oldValue,newValue){const input=this.querySelector("textarea");switch(attr){case"valid":this.isValid=newValue!==null;break;case"name":if(input)input.setAttribute("name",newValue);break;case"dmb-name":if(input)input.setAttribute("name",newValue);break;case"validate":if(input)input.setAttribute("validate",newValue);break}}init(){let _errorInputClass="_error",validations={_required:function(value){let response={valid:true,error:null};if(typeof value==="undefined"||value===null||value===""){response.valid=false;response.error="Este campo es obligatorio"}return response},_numeric:function(value){let response={valid:true,error:null},re=/^[0-9]\d*/;if(value&&!re.test(value)){response.valid=false;response.error="Este campo debe ser solo num&eacute;rico"}return response},_min:function(value,param){let response={valid:true,error:null};if(value&&value.length<param){response.valid=false;response.error="Este campo debe ser de "+param+" caracteres m&iacute;nimo"}return response},_max:function(value,param){let response={valid:true,error:null};if(value&&value.length>param){response.valid=false;response.error="Este campo debe ser de "+param+" caracteres m&aacute;ximo"}return response}};let input=this.getElementsByTagName("textarea").item(0),validators=[];this.querySelector("label").innerText=this.getAttribute("label");input.setAttribute("aria-label",this.getAttribute("label")||"");input.setAttribute("masked",this.getAttribute("masked")||"");input.setAttribute("autocomplete",this.getAttribute("autocomplete")||"");input.setAttribute("type",this.getAttribute("type")||"text");input.setAttribute("class",this.getAttribute("dmb-class")||"");input.setAttribute("name",this.getAttribute("dmb-name")||"");input.setAttribute("validate",this.getAttribute("validate")||"");input.setAttribute("placeholder",this.getAttribute("placeholder")||"");input.setAttribute("valid","true");input.id=this.getAttribute("dmb-id")||this.generateId();const maskInputUppercase=e=>{e.target.value=e.target.value.toUpperCase()};const maskInputAlpha=e=>{var char=e.which||e.keyCode;if((char<65||char>90)&&(char<97||char>122)){return false}};const maskInputNumeric=e=>{var char=e.which||e.keyCode;if(char<48||char>57){return false}};const _runValidators=(element,validators)=>{var unknownValidator=()=>{return{valid:false,error:'Unknown validator type: "'+(validator||{}).key+'"'}},content=element.value.trim(),valid=true,validator=null,func=null,result=null,message=null;element.value=content;for(var i=0,len=validators.length;i<len;i++){validator=validators[i];func=validations["_"+validator.key]||unknownValidator;result=func(content,validator.param);if(result.valid!==true){valid=false;message=result.error;break}}if(valid===true){element.parentNode.classList.remove(_errorInputClass);element.parentNode.querySelectorAll(".error-container").item(0).innerHTML=""}else{element.parentNode.classList.add(_errorInputClass);element.parentNode.querySelectorAll(".error-container").item(0).innerHTML=message}this.isValid=valid;valid?element.setAttribute("valid",""):element.removeAttribute("valid")};const buildValidators=(element,scope)=>{var validators=[],validatorList=(scope.getAttribute("validate")||"").split(",");for(var i=0,len=validatorList.length;i<len;i++){var keyParam=validatorList[i].split(":");if(keyParam[0]){validators.push({key:keyParam[0],param:keyParam.length===2?keyParam[1]:null});if(keyParam[0]==="required"){element.parentNode.classList.add("required");element.setAttribute("required","required")}}}return validators};if(this.getAttribute("validate")){validators=buildValidators(input,this);input.addEventListener("blur",e=>{_runValidators(e.target,validators)},true);document.body.addEventListener(window.dmbEventsService.validate.listener,()=>{_runValidators(input,validators)},true);document.body.addEventListener(window.dmbEventsService.resetValidation.listener,()=>{let elements=this.getElementsByClassName(_errorInputClass);for(let i=0;elements.length;i++){elements.item(0).classList.remove(_errorInputClass)}},true)}if(this.getAttribute("masked")){switch(this.getAttribute("masked")){case"alpha":input.onkeypress=maskInputAlpha;break;case"numeric":input.onkeypress=maskInputNumeric;break;case"uppercase":input.oninput=maskInputUppercase;break}}}}customElements.define("dmb-text-area",DmbTextArea);class DmbPageLoader extends DumboDirective{constructor(){super();window.addEventListener("beforeunload",()=>{this.classList.add("active")});document.addEventListener("readystatechange",()=>setTimeout(()=>{document.readyState==="complete"&&this.classList.remove("active")},500));window.addEventListener(window.dmbEventsService.pageLoaderClose.listener,()=>this.classList.remove("active"))}}customElements.define("dmb-page-loader",DmbPageLoader);class DmbButton extends DumboDirective{constructor(){super()}init(){this.addEventListener("click",()=>{const form=this.closest("dmb-form");const type=this.getAttribute("type");if(type==="submit"&&form){form.submit()}})}click(method){if(typeof method==="function"){this.addEventListener("click",method)}}}customElements.define("dmb-button",DmbButton);class DmbHeader extends DumboDirective{constructor(){super()}init(){let titleDOM=null;if(this.title){titleDOM=document.createElement("h2");titleDOM.classList.add("dmb-header-title");titleDOM.textContent=this.title;this.prepend(titleDOM)}}}customElements.define("dmb-header",DmbHeader);class DmbPanel extends DumboDirective{static get observedAttributes(){return["source"]}constructor(){super();const template='<section class="dmb-view wrapper" transclude>'+"</section>";this.setTemplate(template);this.returnValue=null}attributeChangedCallback(attr,oldValue,newValue){!!newValue&&newValue.length&&this.loadExternalSource()}loadExternalSource(){const url=this.getAttribute("source");let wrapper=null;let sourceRequest=null;if(url&&url.length){sourceRequest=new Request(url);fetch(sourceRequest).then(res=>res.text()).then(data=>{wrapper=this.querySelector(".wrapper");wrapper.innerHTML=data})}return true}close(value){this.returnValue=value;this.removeAttribute("open");this.dispatchEvent(new Event("close"));this.localName==="dmb-dialog"&&this.remove();this.dispatchEvent(new Event("close-dialog"))}open(){this.setAttribute("open","");this.dispatchEvent(new Event("open"));this.addEventListener("click",e=>{if(this.openValue&&e.target===this){this.close("cancelled")}},true)}showModal(){const buttons=this.querySelectorAll('[type="modal-answer"]');[].forEach.call(buttons,button=>{button.addEventListener("click",e=>{this.close(e.target.getAttribute("value"))})});this.open()}setCloseButton(){let icon=null;if(!this.classList.contains("loader")){icon=document.createElement("i");icon.classList.add("icon");icon.classList.add("icon-cancel");icon.classList.add("close-modal-button");icon.addEventListener("click",e=>{e.target.closest("dmb-dialog").close("cancelled")});this.querySelector(".wrapper").prepend(icon)}}isOpen(){return this.openValue}setIcon(icon){const iconElement=document.createElement("i");const wrapper=this.querySelector(".wrapper");iconElement.classList.add("icon");iconElement.classList.add(`icon-${icon}`);wrapper.prepend(iconElement)}error(msg){const message=document.createElement("span");const wrapper=this.querySelector(".wrapper");this.setCloseButton();this.setIcon("alert");msg=msg||"";this.classList.add("error");message.classList.add("message");message.textContent=msg;wrapper.append(message)}prompt(options){const message=document.createElement("span");const wrapper=this.querySelector(".wrapper");let msg=options.message||"";this.classList.add("question");message.classList.add("message");message.textContent=msg;wrapper.append(message)}onClose(fn){if(typeof fn==="function"){this.addEventListener("close-panel",fn)}}init(){!this.classList.contains("right")&&!this.classList.contains("left")&&this.classList.add("right");!this.classList.contains("small")&&!this.classList.contains("large")&&this.classList.add("small");this.addEventListener("click",e=>{e.target===this&&this.close("cancelled")},true);this.loadExternalSource()}}customElements.define("dmb-panel",DmbPanel);class DmbSelect extends DumboDirective{static get observedAttributes(){return["valid","values","validate","dmb-name"]}constructor(){super();const template="<label></label>"+"<select transclude>"+"</select>"+'<span class="error-container"></span>';this.setTemplate(template);this.validations={_required:value=>{let response={valid:true,error:null};if(typeof value==="undefined"||value===null||value===""){response.valid=false;response.error="Este campo es obligatorio"}return response}};this.isValid=false;this.values=[];this.validators=[];this._errorInputClass="_error"}init(){let select=this.querySelector("select");this.querySelector("label").innerText=this.getAttribute("label");select.setAttribute("aria-label",this.getAttribute("label")||"");select.setAttribute("class",this.getAttribute("dmb-class")||"");select.setAttribute("name",this.getAttribute("dmb-name")||"");select.setAttribute("valid",true);select.setAttribute("validate",this.getAttribute("dmb-name"));select.id=this.getAttribute("dmb-id")||this.generateId();select.value=this.getAttribute("value");this.setValidations()}_runValidators(element,validators){let unknownValidator=()=>{return{valid:false,error:'Unknown validator type: "'+(validator||{}).key+'"'}},content=(element.value||"").trim(),valid=true,validator=null,func=null,result=null,message=null;element.value=content;for(var i=0,len=validators.length;i<len;i++){validator=validators[i];func=this.validations["_"+validator.key]||unknownValidator;result=func(content,validator.param);if(result.valid!==true){valid=false;message=result.error;break}}if(valid===true){element.parentNode.classList.remove(this._errorInputClass);element.parentNode.querySelectorAll(".error-container").item(0).innerHTML=""}else{element.parentNode.classList.add(this._errorInputClass);element.parentNode.querySelectorAll(".error-container").item(0).innerHTML=message}this.isValid=valid;valid?element.setAttribute("valid",true):element.removeAttribute("valid")}buildValidators(element,validations){let validators=[];let validatorList=(validations||"").split(",");let keyParam="";for(let i=0,len=validatorList.length;i<len;i++){keyParam=validatorList[i].split(":");if(keyParam[0]){validators.push({key:keyParam[0],param:keyParam.length===2?keyParam[1]:null});if(keyParam[0]==="required"){element.parentNode.classList.add("required");element.setAttribute("required",true)}}}return validators}setValidations(){const select=this.querySelector("select");if(select&&this.getAttribute("validate")){this.validators=this.buildValidators(select,this.getAttribute("validate"));select.addEventListener("blur",e=>{this._runValidators(e.target,this.validators)},{capture:true,passive:true});document.body.addEventListener(window.dmbEventsService.validate.listener,()=>{this._runValidators(select,this.validators)},{capture:true,passive:true});document.body.addEventListener(window.dmbEventsService.resetValidation.listener,()=>{let elements=this.getElementsByClassName(this._errorInputClass);for(let i=0;elements.length;i++){elements.item(0).classList.remove(this._errorInputClass)}},{capture:true,passive:true})}}attributeChangedCallback(attr,oldValue,newValue){let select=this.querySelector("select");switch(attr){case"valid":this.isValid=newValue!==null;break;case"values":if(!oldValue&&newValue){this.buildOptions();this.querySelector("select").dispatchEvent(new Event("change"))}break;case"validate":this.setValidations();break;case"dmb-name":if(select)this.querySelector("select").setAttribute("name",newValue);break}}buildOptions(){let i=0;let total=this.values.length||0;let option=null;const select=this.querySelector("select");select.innerHTML="";select.value="";for(i=0;i<total;i++){option=document.createElement("option");option.setAttribute("value",this.values[i].value);option.innerHTML=this.values[i].text;if(this.values[i].selected||this.values[i]===select.value){option.setAttribute("selected",true);select.value=this.values[i].value}select.append(option)}this.removeAttribute("values")}}customElements.define("dmb-select",DmbSelect);class DmbDialog extends DumboDirective{static get observedAttributes(){return["open"]}constructor(){super();const template='<section class="dmb-view wrapper" transclude>'+"</section>";this.setTemplate(template);this.returnValue=null}attributeChangedCallback(attr,oldValue,newValue){this.openValue=newValue!==null}close(value){this.returnValue=value;this.removeAttribute("open");this.dispatchEvent(new Event("close"));this.localName==="dmb-dialog"&&this.remove();this.dispatchEvent(new Event("close-dialog"))}open(){this.setAttribute("open","");this.dispatchEvent(new Event("open"));this.addEventListener("click",e=>{if(this.openValue&&e.target===this){this.close("cancelled")}},true)}showModal(){const buttons=this.querySelectorAll('[type="modal-answer"]');[].forEach.call(buttons,button=>{button.addEventListener("click",e=>{this.close(e.target.getAttribute("value"))})});this.open()}setCloseButton(){let icon=null;if(!this.classList.contains("loader")){icon=document.createElement("i");icon.classList.add("icon");icon.classList.add("icon-cancel");icon.classList.add("close-modal-button");icon.addEventListener("click",e=>{e.target.closest("dmb-dialog").close("cancelled")});this.querySelector(".wrapper").prepend(icon)}}isOpen(){return this.openValue}setIcon(icon){const iconElement=document.createElement("i");const wrapper=this.querySelector(".wrapper");iconElement.classList.add("icon");iconElement.classList.add(`icon-${icon}`);wrapper.prepend(iconElement)}error(msg){const message=document.createElement("span");const wrapper=this.querySelector(".wrapper");this.setCloseButton();this.setIcon("alert");msg=msg||"";this.classList.add("error");message.classList.add("message");message.textContent=msg;wrapper.append(message)}prompt(options){const message=document.createElement("span");const wrapper=this.querySelector(".wrapper");let msg=options.message||"";this.classList.add("question");message.classList.add("message");message.textContent=msg;wrapper.append(message)}onClose(fn){if(typeof fn==="function"){this.addEventListener("close-dialog",fn)}}}customElements.define("dmb-dialog",DmbDialog);class DmbDialogService{setMessage(dialog,msg){const message=document.createElement("span");message.classList.add("message");message.textContent=msg;dialog.append(message);return true}open(){const dialog=document.createElement("dmb-dialog",{is:"dmb-dialog"});document.body.append(dialog);dialog.showModal();return dialog}error(msg){const dialog=document.createElement("dmb-dialog");document.body.append(dialog);dialog.error(msg);dialog.showModal();return dialog}loader(){const dialog=document.createElement("dmb-dialog",{is:"dmb-dialog"});dialog.classList.add("loader");document.body.append(dialog);dialog.showModal();return dialog}drawer(content,size="small"){const dialog=document.createElement("dmb-dialog",{is:"dmb-dialog"});dialog.classList.add("drawer");dialog.classList.add(size);document.body.append(dialog);dialog.querySelector(".wrapper").innerHTML=content;dialog.showModal();return dialog}closeAll(){const dialogs=document.querySelectorAll("dmb-dialog");const items=dialogs.length;if(items){for(let i=0;i<items;i++){dialogs[i].close("cancelled")}}return true}}Window.prototype.dmbDialogService=new DmbDialogService;